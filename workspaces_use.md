# WorkSpacesの利用手順

## クライアント証明書の導入

始めに、ローカルPCにクライアント証明書を導入します。p12ファイルとパスフレーズが管理者から展開されます。

### Mac

1. Finderで`hogehoge.p12`をダブルクリックします。パスフレーズが聞かれるので入力します。
1. *キーチェーンアクセス*が開くので、*自分の証明書*にインポートされたことを確認します。

![](images/workspaces03.png)

1. 左下の分類から、*証明書*を選択し、`corp.example.com`をダブルクリックして開きます。
1. *信頼*を展開し、*この証明書を使用するとき*のドロップダウンで*常に信頼*を選択します。

![](images/workspaces04.png)

1. ウインドウを閉じて設定内容を保存します。

## パスワードの設定とクライアントのダウンロード

メールが届くので、リンクをクリックしてパスワードを設定し、クライアントソフトウェアをダウンロードします。

## WorkSpacesへの接続

WorkSpacesクライアントを起動します。

## プロキシサーバーの設定

プロキシサーバーを設定します。

1. スタートボタンをクリックし、その上の歯車のアイコンをクリックします。
1. **Windowsの設定**が開くので、**ネットワークとインターネット**をクリックします。
1. 左のメニューから*プロキシ*をクリックします。
1. **手動プロキシセットアップ**のセクションで、以下の用に設定し、**保存**します。

  |項目|設定値|備考|
  |---|---|---|
  |プロキシサーバーを使う|オン||
  |アドレス|`proxy.example.com`|`proxy.<cdk.context.jsonのproxy.domainで指定したドメイン名>`を指定する|
  |ポート|`3128`||

![](2020-01-26-01-14-55.png)

1. `https://<アカウントID>.signin.aws.amazon.com/console`にアクセスし、管理者から連携されたユーザーおよびパスワードでログインします。
1. 初回ログイン時はパスワード変更が求められるので変更します。
1. 実際に作業を行うロールにスイッチします。コンソール右上の**ユーザー名 @ アカウントID**の部分をクリックし、ドロップダウンメニューから**スイッチロール**を選択します。
1. ロールの切り替え画面が表示された場合は**ロールの切り替え**をクリックします。
1. 以下を入力します。

  |項目|設定値|備考|
  |---|---|---|
  |アカウント|<アカウントID>||
  |ロール|（下記の参照）||
  
  |ユーザー|スイッチ可能なロール|備考|
  |---|---|---|
  |全体管理者|AdminRole、CostAdminRole、SystemAdminRole、S3AdminRole、KmsAdminRole、SecurityAuditRole、DataScientistRole||
  |環境管理者|CostAdminRole、SystemAdminRole、S3AdminRole||
  |セキュリティ監査者|KmsAdminRole、SecurityAuditRole||
  |分析者|DataScientistRole||
